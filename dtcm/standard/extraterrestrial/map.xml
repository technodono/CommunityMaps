<map proto="1.4.2">
<name>Extraterrestrial</name>
<version>1.0.0</version>
<gamemode>ctw</gamemode>
<created>2023-06-21</created>
<objective>Leak the enemies core!</objective>
<phase>development</phase>
<time>30m</time>
<authors>
    <author uuid="1aad55f7-2dea-4f22-85ca-ad9de3a78609" contribution="Map author and creator"/> <!-- Technodono -->
</authors>
<teams>
    <team id="blue" color="blue" max="10">Blue</team>
    <team id="red" color="red" max="10">Red</team>
</teams>
<broadcasts>
    <tip after="0m" every="3m">`eâš   `7Remeber to use your ingots and emeralds to purchase items in the shop!</tip>
</broadcasts>
<spawns>
    <spawn team="blue" kit="spawn-kit" yaw="-90">
        <regions>
            <point>-8.5,8,-155.5</point>
        </regions>
    </spawn>
    <spawn team="red" kit="spawn-kit" yaw="90">
        <regions>
            <point>3.5,8,12.5</point>
        </regions>
    </spawn>
    <default>
        <regions yaw="0">
            <point>-2,40,-71</point>
        </regions>
    </default>
</spawns>
<kits>
    <kit id="spawn-kit">
        <item slot="0" name="`6Energy blade" unbreakable="true">iron sword</item>
        <item slot="1" unbreakable="true" material="bow">
            <enchantment level="1">infinity</enchantment>
        </item> 
        <item slot="2" unbreakable="true" material="diamond pickaxe"/>
        <item slot="3" name="`rIron Chopper" unbreakable="true" material="iron axe"/>
        <item slot="4" amount="64" damage="2" material="sandstone"/>
        <item slot="5" amount="16" team-color="true">stained glass</item>
        <item slot="17">arrow</item>
        <item slot="6">golden apple</item>
        <potion duration="2" amplifier="25">heal</potion>
        <potion duration="2" amplifier="25">damage resistance</potion>
        <helmet team-color="true" unbreakable="true" locked="true">leather helmet</helmet>
        <leggings unbreakable="true" locked="true">chainmail leggings</leggings>
        <chestplate color="4C4C4C" unbreakable="true" locked="true">leather chestplate</chestplate>
        <boots color="4C4C4C" unbreakable="true" locked="true">leather boots</boots>
        <!-- Important! gamemode -->
        <game-mode>survival</game-mode>
    </kit>
     <!-- Upgrades -->
    <give filter="apply-haste-1">
        <kit>
            <effect amplifier="1">fast digging</effect>
        </kit>
    </give>
    <give filter="apply-haste-2">
        <kit>
            <effect amplifier="2">fast digging</effect>
        </kit>
    </give>
    <give filter="apply-speed">
        <kit>
            <effect amplifier="1">speed</effect>
        </kit>
    </give>
    <!-- Weapon Upgrades -->
    <kit id="powerinfinitybow" deduct-tools="false">
        <action>
            <replace-item>
                <find material="bow" unbreakable="true"/>
                <replace material="air"/>
            </replace-item>
        </action>
        <item material="bow" enchantment="power:1;infinity" unbreakable="true"/>
    </kit>
</kits>
<actions>
    <!-- Upgrade variables -->
    <set id="haste-dummy-1" var="haste_variable" value="1" scope="player"/>
    <set id="haste-dummy-2" var="haste_variable" value="2" scope="player"/>
    <set id="speed-dummy" var="speed_variable" value="1" scope="player"/>
    <set id="sharpness-dummy" var="sharpness_variable" value="1" scope="player"/>
    <set id="power-dummy" var="power_variable" value="1" scope="player"/>
    <set id="protection-dummy-1" var="protection_variable" value="1" scope="player"/>
    <set id="generator-dummy" var="generator_variable" value="1" scope="player"/>
    <!-- Sharpness replacements -->
    <action id="sharpness-replacements" scope="player">
        <replace-item ignore-metadata="true">
            <find material="iron sword"/>
            <replace material="iron sword" unbreakable="true" enchantment="sharpness"/>
        </replace-item>
    </action>
    <!-- Bow replacements -->
    <action id="power-replacements" scope="player">
        <replace-item ignore-metadata="true">
            <find material="bow"/>
            <replace material="bow" unbreakable="true" enchantment="power:1;infinity"/>
        </replace-item>
    </action>
    <!-- Protection replacements -->
    <action id="protection-replacement-1" scope="player">
        <replace-item ignore-metadata="true">
            <find material="leather boots"/>
            <replace material="leather boots" team-color="true" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="leather leggings"/>
            <replace material="leather leggings" team-color="true" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="leather chestplate"/>
            <replace material="leather chestplate" team-color="true" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="leather helmet"/>
            <replace material="leather helmet" team-color="true" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="chainmail boots"/>
            <replace material="chainmail boots" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="chainmail leggings"/>
            <replace material="chainmail leggings" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="chainmail chestplate"/>
            <replace material="chainmail chestplate" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="chainmail helmet"/>
            <replace material="chainmail helmet" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="iron boots"/>
            <replace material="iron boots" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="iron leggings"/>
            <replace material="iron leggings" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="iron chestplate"/>
            <replace material="iron chestplate" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="iron helmet"/>
            <replace material="iron helmet" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="diamond boots"/>
            <replace material="diamond boots" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="diamond leggings"/>
            <replace material="diamond leggings" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="diamond chestplate"/>
            <replace material="diamond chestplate" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
        <replace-item ignore-metadata="true">
            <find material="diamond helmet"/>
            <replace material="diamond helmet" unbreakable="true" enchantment="protection" locked="true"/>
        </replace-item>
    </action>
    <!-- Upgrade alerts -->
    <message id="sharpness-alert-1" text="`bYour sword has been upgraded to `4`lSharpness I`r`b!"/>
    <trigger filter="sharpness-1" trigger="sharpness-alert-1" scope="player"/>
    <message id="protection-alert-1" text="`bYour armour has been upgraded to `9`lProtection I`r`b!"/>
    <trigger filter="protection-1" trigger="protection-alert-1" scope="player"/>
    <message id="power-alert-1" text="`bYour bow has been upgraded to `9`lPower I`r`b!"/>
    <trigger filter="power-1" trigger="power-alert-1" scope="player"/>
    <message id="haste-alert-1" text="`bYour team now has `e`lHaste I`r`b!"/>
    <trigger filter="haste-1" trigger="haste-alert-1" scope="player"/>
    <message id="haste-alert-2" text="`bYour team now has `e`lHaste II`r`b!"/>
    <trigger filter="haste-2" trigger="haste-alert-2" scope="player"/>
    <message id="speed-alert-1" text="`bYour team now has `9`lSpeed I`r`b!"/>
    <trigger filter="speed-1" trigger="speed-alert-1" scope="player"/>
    <message id="generator-alert-1" text="`bYour team now has an `9`lAdvanced generator`r`b!"/>
    <trigger filter="generator-1" trigger="generator-alert-1" scope="player"/>
    <!-- Enchantment triggers -->
    <trigger filter="apply-sharpness" trigger="sharpness-replacements" scope="player"/>
    <trigger filter="apply-power" trigger="power-replacements" scope="player"/>
    <trigger filter="apply-protection-1" trigger="protection-replacement-1" scope="player"/>
</actions>
<variables>
    <variable id="haste_variable" scope="team"/>
    <variable id="speed_variable" scope="team"/>
    <variable id="generator_variable" scope="team"/>
    <variable id="power_variable" scope="team"/>
    <variable id="sharpness_variable" scope="team"/>
    <variable id="protection_variable" scope="team"/>
</variables>
<filters>
    <deny id="deny-red">
        <team id="only-red">red</team>
    </deny>
    <deny id="deny-blue">
        <team id="only-blue">blue</team>
    </deny>
    <deny id="deny-void">
        <void/>
    </deny>
    <deny id="not-breakable">
        <any>
            <material>emerald</material>
        </any>
    </deny>
     <!-- Team Upgrade Systems -->
    <all id="apply-sharpness">
        <variable var="sharpness_variable">1</variable>
        <alive/>
    </all>
    <all id="apply-power">
        <variable var="power_variable">1</variable>
        <alive/>
    </all>
    <all id="apply-protection-1">
        <variable var="protection_variable">1</variable>
        <alive/>
    </all>
    <all id="apply-haste-1">
        <variable var="haste_variable">1</variable>
        <alive/>
        <any>
            <all>
                <team>blue</team>
                <region id="blue-core-area"/>
            </all>
            <all>
                <team>red</team>
                <region id="red-core-area"/>
            </all>
        </any>
    </all>
    <all id="apply-haste-2">
        <variable var="haste_variable">2</variable>
        <alive/>
        <any>
            <all>
                <team>blue</team>
                <region id="blue-core-area"/>
            </all>
            <all>
                <team>red</team>
                <region id="red-core-area"/>
            </all>
        </any>
    </all>
    <all id="apply-speed">
        <variable var="speed_variable">1</variable>
        <alive/>
    </all>
    <all id="apply-generator">
        <variable var="generator_variable">1</variable>
        <alive/>
    </all>
    
    <variable id="haste-0" var="haste_variable">0</variable>
    <variable id="haste-1" var="haste_variable">1</variable>
    <variable id="haste-2" var="haste_variable">2</variable>
    <variable id="protection-0" var="protection_variable">0</variable>
    <variable id="protection-1" var="protection_variable">1</variable>
    <variable id="sharpness-0" var="sharpness_variable">0</variable>
    <variable id="sharpness-1" var="sharpness_variable">1</variable>
    <variable id="power-0" var="power_variable">0</variable>
    <variable id="power-1" var="power_variable">1</variable>
    <variable id="speed-0" var="speed_variable">0</variable>
    <variable id="speed-1" var="speed_variable">1</variable>
    <variable id="generator-0" var="generator_variable">0</variable>
    <variable id="generator-1" var="generator_variable">1</variable>
</filters>
<regions>
<!-- Regions -->
    <negative id="void-area">
        <rectangle min="30,-164" max="-35,21"/>
    </negative>
    <union id="spawn-areas">
        <rectangle id="blue-spawn-area" min="6,-149" max="-14,-164"/>
        <rectangle id="red-spawn-area" min="-11,6" max="9,21"/>
    </union>
    <!-- Areas -->
    <negative id="not-all-core-areas">
        <union id="all-core-areas">
            <rectangle id="blue-core-area" min="-14,-155" max="-34,-128"/>
            <rectangle id="red-core-area" min="9,12" max="29,-15"/>
        </union>
    </negative>
    <union id="all-cores">
        <cuboid id="blue-core" min="-27,16,-145" max="-22,21,-140"/>
        <cuboid id="red-core" min="22,16,2" max="17,21,-3"/>
    </union>
    <union id="all-generators">
        <cuboid id="blue-generator" min="4,8,-158" max="1,9,-153"/>
        <cuboid id="red-generator" min="-9,8,15" max="-6,9,10"/>
    </union>
    <!-- blocks -->
    <block id="emerald-spawner-east">22,5,-73</block>
    <block id="emerald-spawner-west">-28,5,-71</block>
    <!-- Rules Applied (order is important!) -->
    <apply block-break="not-breakable"/>
    <apply block="never" region="spawn-areas" message="You may not modify spawn areas!"/>
    <apply enter="only-blue" region="blue-spawn-area" message="You may not enter your enemy's spawn area!"/>
    <apply enter="only-red" region="red-spawn-area" message="You may not enter your enemy's spawn area!"/>
    <apply block="deny-void" region="void-area" message="You may not modify the void area!"/>
</regions>
<!--  Spawners (drop in sets of 2 so more players can pickup stuff)  -->
<spawners>
    <spawner spawn-region="blue-generator" player-region="blue-spawn-area" max-entities="128" delay="1s">
        <item amount="4" material="gold nugget"/>
        <item amount="4" material="gold nugget"/>
    </spawner>
    <spawner spawn-region="blue-generator" player-region="blue-spawn-area" max-entities="2" filter="apply-generator" delay="25s">
        <item amount="1" material="emerald"/>
    </spawner>
    <spawner spawn-region="red-generator" player-region="red-spawn-area" max-entities="128" delay="1s">
        <item amount="4" material="gold nugget"/>
        <item amount="4" material="gold nugget"/>
    </spawner>
    <spawner spawn-region="red-generator" player-region="red-spawn-area" max-entities="2" filter="apply-generator" delay="25s">
        <item amount="1" material="emerald"/>
    </spawner>
    <spawner spawn-region="emerald-spawner-east" player-region="everywhere" delay="10s">
        <item material="emerald"/>
    </spawner>
    <spawner spawn-region="emerald-spawner-west" player-region="everywhere" delay="10s">
        <item material="emerald"/>
    </spawner>
</spawners>
<shopkeepers>
    <shopkeepers name="`b`lItem Shop" shop="item-shop"> 
        <shopkeeper yaw="0">-2.5,8,-159.5</shopkeeper> <!-- Blue -->
        <shopkeeper yaw="180">-2.5,8,16.5</shopkeeper> <!-- Red -->
    </shopkeepers>
    <shopkeepers name="`b`lUpgrade Shop" shop="upgrade-shop">
        <shopkeeper yaw="0">-5.5,8,-159.5</shopkeeper> <!-- Blue -->
        <shopkeeper yaw="180">0.5,8,16.5</shopkeeper> <!-- Red -->
    </shopkeepers>
</shopkeepers>
<shops>
    <shop id="item-shop" name="Items">
        <category id="defences" name="`aDefences" material="workbench">
            <item material="workbench" amount="32" price="16" currency="gold nugget"/>
            <item material="water bucket" amount="1" price="16" currency="gold nugget"/>
            <item material="bucket" amount="1" price="8" currency="gold nugget"/>
            <item material="dark oak fence" amount="16" price="32" currency="gold nugget"/>
            <item material="dark oak fence gate" amount="16" price="32" currency="gold nugget"/>
            <item material="step" damage="1" amount="16" price="16" currency="gold nugget"/>
            <item material="iron fence" amount="16" price="32" currency="gold nugget"/>
            <item material="iron_plate" amount="16" price="4" currency="gold nugget"/>
            <item material="stone button" amount="16" price="8" currency="gold nugget"/>
            <item material="anvil" amount="16" price="4" currency="emerald"/>
        </category>
        <category id="offensives" name="`aOffensives" material="tnt">
            <item material="tnt" amount="16" price="16" currency="gold nugget"/>
            <item material="redstone" amount="16" price="4" currency="gold nugget"/>
            <item material="redstone torch on" amount="16" price="4" currency="gold nugget"/>
            <item material="diode" amount="16" price="8" currency="gold nugget"/>
            <item material="stone button" amount="16" price="8" currency="gold nugget"/>
            <item material="lever" amount="16" price="8" currency="gold nugget"/>
            <item material="step" damage="1" amount="16" price="16" currency="gold nugget"/>
            <item material="dark oak fence" amount="16" price="32" currency="gold nugget"/>
            <item material="iron_plate" amount="16" price="4" currency="gold nugget"/>
            <item material="water bucket" amount="1" price="16" currency="gold nugget"/>
            <item material="dispenser" amount="3" price="16" currency="emerald"/>
        </category>
        <category id="utility-blocks" name="`aUtility blocks" material="ladder">
            <item material="ladder" amount="16" price="8" currency="gold nugget"/>
            <item material="torch" amount="16" price="4" currency="gold nugget"/>
            <item material="chest" amount="1" price="8" currency="gold nugget"/>
            <item material="sponge" amount="4" price="8" currency="emerald"/>
        </category>
        <category id="extra-blocks" name="`aExtra blocks" material="stained glass">
            <item material="sandstone" damage="2" amount="16" price="8" currency="gold nugget"/>
            <item material="stained glass" team-color="true" amount="16" price="16" currency="gold nugget"/>
            <item material="ender stone" amount="16" price="32" currency="gold nugget"/>
            <item material="piston base" amount="16" price="2" currency="emerald"/>
            <item material="piston sticky base" amount="16" price="2" currency="emerald"/>
        </category>
    </shop>
    <shop id="upgrade-shop" name="Team Upgrades">
        <category id="upgrades" name="`aTeam Upgrades" material="beacon">
            <item material="iron sword" name="`4`lSharpness I" lore="`7Your team permanently gains|`7Sharpness I on all swords" price="30" currency="emerald" action="sharpness-dummy" filter="sharpness-0"/>
            <item material="bow" name="`4`lPower I" lore="`7Your team permanently gains|`7Power I on all bows" price="30" currency="emerald" action="power-dummy" filter="power-0"/>
            <item material="anvil" name="`e`lProtection I" lore="`7Your team permanently gains|`7Protection I on all armor pieces." price="30" currency="emerald" action="protection-dummy-1" filter="protection-0"/>
            <item material="gold pickaxe" name="`6`lHaste I" lore="`7All players on your team|`7permanently gain Haste I when defending!." price="30" currency="emerald" action="haste-dummy-1" filter="haste-0"/>
            <item material="diamond pickaxe" name="`6`lHaste II" lore="`7All players on your team|`7permanently gain Haste II when defending!." price="40" currency="emerald" action="haste-dummy-2" filter="haste-1"/>
            <item material="feather" name="`c`lSpeed I" lore="`7All players on your team|`7permanently gain Speed I!." price="40" currency="emerald" action="speed-dummy" filter="speed-0"/>
            <item material="emerald" name="`a`lAdvanced generator" lore="`7Your team's generator will|`7ocassionaly spawn emeralds!." price="40" currency="emerald" action="generator-dummy" filter="generator-0"/>
        </category>
    </shop>
</shops>
<toolrepair>
    <tool>iron sword</tool>
    <tool>iron axe</tool>
    <tool>diamond pickaxe</tool>
    <tool>bow</tool>
</toolrepair>
<itemremove>
    <item>arrow</item>
    <item>leather helmet</item>
    <item>leather chestplate</item>
    <item>chainmail leggings</item>
    <item>leather boots</item>
    <item>ender stone</item>
    <item>stained clay</item>
    <item>hard clay</item>
    <item>wood step</item>
    <item>wood double step</item>
    <item>step</item>
    <item>double step</item>
    <item>double stone slab2</item>
    <item>dark oak fence</item>
    <item>nether fence</item>
    <item>iron fence</item>
    <item>banner</item>
    <item>hopper</item>
    <item>melon</item>
    <item>gold plate</item>
    <item>sponge</item>
    <item>redstone lamp off</item>
    <item>redstone lamp on</item>
    <item>iron trapdoor</item>
    <item>cobble wall</item>
    <item>daylight detector</item>
    <item>daylight detector inverted</item>
    <item>sand</item>
    <item>sandstone</item>
    <item>stone</item>
    <item>smooth brick</item>
    <item>smooth stairs</item>
    <item>quartz stairs</item>
    <item>gold block</item>
    <item>obsidian</item>
</itemremove>
<crafting>
    <disable>gold ingot</disable>
    <disable>emerald block</disable>
</crafting>
<timelock>on</timelock>
<maxbuildheight>27</maxbuildheight>
<hunger>
    <depletion>off</depletion>
</hunger>
<kill-rewards>
    <kill-reward>
        <item material="golden apple"/>
        <item slot="4" amount="16" damage="2" material="sandstone"/>
        <item slot="5" amount="8" team-color="true">stained glass</item>
    </kill-reward>
</kill-rewards>
<!-- map regen -->
<renewables>
    <renewable interval="15s" grow="true" particles="false" sound="false" avoid-players="2" region="not-all-core-areas">
        <renew-filter>
        <not>
            <any>
                <material>air</material>
            </any>
        </not>
        </renew-filter>
        <replace-filter>
            <any>
                <material>air</material>
            </any>
        </replace-filter>
    </renewable>
</renewables>
<!-- Cores & modes -->
<cores material="obsidian" leak="4" mode-changes="true">
    <core team="red" region="red-core"/>
    <core team="blue" region="blue-core"/>
</cores>
<modes>
    <mode after="20m" material="gold block" id="gold-mode" name="`eGOLD CORE MODE"/>
</modes>
</map>
